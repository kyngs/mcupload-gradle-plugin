steps:
  build:
    image: "eclipse-temurin:17-alpine"
    commands:
      - "cd plugin/"
      - "./gradlew licenseCheck build javadocJar"

  publish:
    image: "eclipse-temurin:17-alpine"
    commands:
      - "cd plugin/"
      - "./gradlew publish -PkyngsRepoUsername=$${KYNGS_REPO_TOKEN} -PkyngsRepoPassword=$${KYNGS_REPO_SECRET}"
    when:
      - event: push
        branch:
          - master
    secrets: [ kyngs_repo_token, kyngs_repo_secret ]